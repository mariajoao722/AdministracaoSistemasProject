{
  "version": 4,
  "terraform_version": "1.6.4",
  "serial": 532,
  "lineage": "028331a5-a5c3-d686-1105-089008293cb4",
  "outputs": {
    "instance_id": {
      "value": "3094480006699269870",
      "type": "string"
    },
    "instance_id2": {
      "value": "2028766146590392046",
      "type": "string"
    },
    "instance_id3": {
      "value": "6387234014370709229",
      "type": "string"
    },
    "instance_id4": {
      "value": "634562613473722649",
      "type": "string"
    },
    "instance_id5": {
      "value": "1286258174757191961",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "google_compute_disk",
      "name": "default",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "async_primary_disk": [],
            "creation_timestamp": "2023-12-10T10:14:13.554-08:00",
            "description": "",
            "disk_encryption_key": [],
            "guest_os_features": [],
            "id": "projects/projectadms/zones/europe-southwest1-c/disks/dbs",
            "image": "",
            "label_fingerprint": "42WmSpB8rSM=",
            "labels": null,
            "last_attach_timestamp": "",
            "last_detach_timestamp": "",
            "licenses": [],
            "name": "dbs",
            "physical_block_size_bytes": 4096,
            "project": "projectadms",
            "provisioned_iops": 0,
            "provisioned_throughput": 0,
            "self_link": "https://www.googleapis.com/compute/v1/projects/projectadms/zones/europe-southwest1-c/disks/dbs",
            "size": 10,
            "snapshot": "",
            "source_disk": "",
            "source_disk_id": "",
            "source_image_encryption_key": [],
            "source_image_id": "",
            "source_snapshot_encryption_key": [],
            "source_snapshot_id": "",
            "timeouts": null,
            "type": "pd-standard",
            "users": [],
            "zone": "europe-southwest1-c"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_compute_disk",
      "name": "default1",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "async_primary_disk": [],
            "creation_timestamp": "2023-12-10T10:14:13.553-08:00",
            "description": "",
            "disk_encryption_key": [],
            "guest_os_features": [],
            "id": "projects/projectadms/zones/europe-southwest1-c/disks/dbss",
            "image": "",
            "label_fingerprint": "42WmSpB8rSM=",
            "labels": null,
            "last_attach_timestamp": "",
            "last_detach_timestamp": "",
            "licenses": [],
            "name": "dbss",
            "physical_block_size_bytes": 4096,
            "project": "projectadms",
            "provisioned_iops": 0,
            "provisioned_throughput": 0,
            "self_link": "https://www.googleapis.com/compute/v1/projects/projectadms/zones/europe-southwest1-c/disks/dbss",
            "size": 10,
            "snapshot": "",
            "source_disk": "",
            "source_disk_id": "",
            "source_image_encryption_key": [],
            "source_image_id": "",
            "source_snapshot_encryption_key": [],
            "source_snapshot_id": "",
            "timeouts": null,
            "type": "pd-standard",
            "users": [],
            "zone": "europe-southwest1-c"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_compute_disk",
      "name": "default2",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "async_primary_disk": [],
            "creation_timestamp": "2023-12-10T10:14:13.410-08:00",
            "description": "",
            "disk_encryption_key": [],
            "guest_os_features": [],
            "id": "projects/projectadms/zones/europe-southwest1-c/disks/dbsss",
            "image": "",
            "label_fingerprint": "42WmSpB8rSM=",
            "labels": null,
            "last_attach_timestamp": "",
            "last_detach_timestamp": "",
            "licenses": [],
            "name": "dbsss",
            "physical_block_size_bytes": 4096,
            "project": "projectadms",
            "provisioned_iops": 0,
            "provisioned_throughput": 0,
            "self_link": "https://www.googleapis.com/compute/v1/projects/projectadms/zones/europe-southwest1-c/disks/dbsss",
            "size": 10,
            "snapshot": "",
            "source_disk": "",
            "source_disk_id": "",
            "source_image_encryption_key": [],
            "source_image_id": "",
            "source_snapshot_encryption_key": [],
            "source_snapshot_id": "",
            "timeouts": null,
            "type": "pd-standard",
            "users": [],
            "zone": "europe-southwest1-c"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_compute_instance",
      "name": "backup",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 6,
          "attributes": {
            "advanced_machine_features": [],
            "allow_stopping_for_update": null,
            "attached_disk": [],
            "boot_disk": [
              {
                "auto_delete": true,
                "device_name": "persistent-disk-0",
                "disk_encryption_key_raw": "",
                "disk_encryption_key_sha256": "",
                "initialize_params": [
                  {
                    "image": "https://www.googleapis.com/compute/v1/projects/debian-cloud/global/images/debian-11-bullseye-v20231115",
                    "labels": {},
                    "resource_manager_tags": null,
                    "size": 10,
                    "type": "pd-standard"
                  }
                ],
                "kms_key_self_link": "",
                "mode": "READ_WRITE",
                "source": "https://www.googleapis.com/compute/v1/projects/projectadms/zones/europe-southwest1-c/disks/backup"
              }
            ],
            "can_ip_forward": false,
            "confidential_instance_config": [],
            "cpu_platform": "Intel Broadwell",
            "current_status": "RUNNING",
            "deletion_protection": false,
            "description": "",
            "desired_status": null,
            "enable_display": false,
            "guest_accelerator": [],
            "hostname": "",
            "id": "projects/projectadms/zones/europe-southwest1-c/instances/backup",
            "instance_id": "1286258174757191961",
            "label_fingerprint": "42WmSpB8rSM=",
            "labels": null,
            "machine_type": "e2-micro",
            "metadata": null,
            "metadata_fingerprint": "6s2EbCHQTnM=",
            "metadata_startup_script": "#!/bin/bash\r\nsudo apt-get -y install ceph-common\r\nsudo apt-get install -y ceph-osd\r\nsudo apt-get install xfsprogs -y\r\nsudo apt-get install rsync\r\nsudo apt install postgresql postgresql-contrib -y\r\n\r\n# verify that the PostgreSQL server is running\r\n\r\nsudo systemctl start postgresql.service\r\n\r\n# https://www.devart.com/dbforge/postgresql/how-to-install-postgresql-on-linux/\r\n# https://www.server-world.info/en/note?os=Debian_11\u0026p=ceph14\u0026f=3\r\n# https://www.digitalocean.com/community/tutorials/how-to-use-rsync-to-sync-local-and-remote-directories-pt\r\n# https://www.rosehosting.com/blog/install-pgadmin-4-on-debian-10/\r\n# https://computingforgeeks.com/how-to-install-pgadmin4-on-debian/ \r\n\r\nssh-keygen -C publicMethod3 -f ~/.ssh/publicMethod3 -N \"\" -q\r\n\r\ncat \u003c\u003cEOF \u003e ~/script.sh\r\n#!/bin/bash\r\nsudo chown ceph. /etc/ceph/ceph.*\r\n\r\n# create default RBD pool [rbd]\r\nsudo ceph osd pool create rbd 64\r\n\r\n# enable Placement Groups auto scale mode\r\nsudo ceph mgr module enable pg_autoscaler\r\nsudo ceph osd pool set rbd pg_autoscale_mode on\r\n\r\n# initialize the pool\r\nsudo rbd pool init rbd\r\nsudo ceph osd pool autoscale-status\r\n\r\n\r\n# create a block device with 10G\r\nsudo rbd create --size 10G --pool rbd rbd01\r\n\r\n# confirm\r\nsudo rbd ls -l\r\n\r\n\r\n# map the block device\r\nsudo rbd map rbd01\r\n\r\n# confirm\r\nsudo rbd showmapped\r\n\r\n# format with XFS\r\nsudo mkfs.xfs /dev/rbd0\r\n\r\n# mount\r\nsudo mount /dev/rbd0 /mnt\r\nEOF\r\n\r\nsudo chmod +x ~/script.sh\r\n\r\n\r\n# To switch to the postgres account on your server, execute the following command:\r\n\r\n# sudo -i -u postgres\r\n\r\n# To access the PostgreSQL prompt, type:\r\n\r\n# psql\r\n\r\n# This will log you into the PostgreSQL prompt where you can interact with the database management system.\r\n\r\n\r\n\r\n# create a user and database with the following command:\r\n\r\n# CREATE USER pguser WITH PASSWORD 'password';\r\n# CREATE DATABASE pgdb;\r\n\r\n# grant all the privileges to PostgreSQL database with the following command:\r\n\r\n# GRANT ALL PRIVILEGES ON DATABASE pgdb to pguser;\r\n\r\n\r\n# To exit the PostgreSQL prompt, type:\r\n\r\n#\\q\r\n\r\n\r\n\r\ncat \u003c\u003cEOF \u003e ~/scriptpgAdmin.sh\r\n#!/bin/bash\r\n# pgAdmin repository\r\nsudo curl https://www.pgadmin.org/static/packages_pgadmin_org.pub | sudo apt-key add\r\n\r\n#Then create the repository configuration file\r\nsudo sh -c 'echo \"deb https://ftp.postgresql.org/pub/pgadmin/pgadmin4/apt/$(lsb_release -cs) pgadmin4 main\" \u003e /etc/apt/sources.list.d/pgadmin4.list'\r\nsudo sh -c 'echo \"deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main\" \u003e /etc/apt/sources.list.d/pgdg.list'\r\n\r\n# Import the Repository Signing Key\r\nwget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo gpg --dearmor -o /usr/share/keyrings/postgresql-archive-keyring.gpg\r\n\r\n\r\nsudo apt update\r\nsudo apt install pgadmin4 -y\r\nEOF\r\n\r\nsudo chmod +x ~/scriptpgAdmin.sh\r\n\r\n# Configure Web Server for pgAdmin4\r\n\r\n# sudo /usr/pgadmin4/bin/setup-web.sh\r\n# email: mjmarquespais@gmail.com\r\n# password: 1234567890\r\n\r\n# mover  pasta do postgreSQL para pasta que dei mount\r\n# sudo mv /var/lib/postgresql/ /mnt\r\n\r\n# BACKUP\r\n\r\nsudo mkdir -p backup/MON/cephconf\r\nsudo mkdir -p backup/MON/cephvar\r\nsudo mkdir -p backup/MGR/cephconf\r\nsudo mkdir -p backup/MGR/cephvar\r\nsudo mkdir -p backup/OSD1/cephconf\r\nsudo mkdir -p backup/OSD1/cephvar\r\nsudo mkdir -p backup/OSD2/cephconf\r\nsudo mkdir -p backup/OSD2/cephvacat \r\n\r\ncat \u003c\u003cEOF \u003e ~/scriptBUPmon.sh\r\n#!/bin/bash\r\n# sudo rsync -av --delete --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod3\" publicMethod3@10.204.0.12:/etc/ceph ~/backup/MON/cephconf\r\nsudo rsync -av --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod3\" publicMethod3@10.204.0.12:/etc/ceph/ ~/backup/MON/cephconf\r\n\r\nsudo rsync -av --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod3\" publicMethod3@10.204.0.12:/var/lib/ceph/ ~/backup/MON/cephvar\r\nEOF\r\n\r\ncat \u003c\u003cEOF \u003e ~/scriptBUPmgr.sh\r\n#!/bin/bash\r\n\r\nsudo rsync -av --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod3\" publicMethod3@10.204.0.13:/etc/ceph/ ~/backup/MGR/cephconf\r\n\r\nsudo rsync -av --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod3\" publicMethod3@10.204.0.13:/var/lib/ceph/ ~/backup/MGR/cephvar\r\nEOF\r\n\r\ncat \u003c\u003cEOF \u003e ~/scriptBUPosd1.sh\r\n#!/bin/bash\r\n\r\nsudo rsync -av --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod3\" publicMethod3@10.204.0.10:/etc/ceph/ ~/backup/OSD1/cephconf\r\n\r\nsudo rsync -av --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod3\" publicMethod3@10.204.0.10:/var/lib/ceph/ ~/backup/OSD1/cephvar\r\nEOF\r\n\r\ncat \u003c\u003cEOF \u003e ~/scriptBUPosd2.sh\r\n#!/bin/bash\r\n\r\nsudo rsync -av --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod3\" publicMethod3@10.204.0.11:/etc/ceph/ ~/backup/OSD2/cephconf\r\n\r\nsudo rsync -av --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod3\" publicMethod3@10.204.0.11:/var/lib/ceph/ ~/backup/OSD2/cephvar\r\nEOF\r\n\r\nsudo chmod +x ~/scriptBUPmon.sh\r\nsudo chmod +x ~/scriptBUPmgr.sh\r\nsudo chmod +x ~/scriptBUPosd1.sh\r\nsudo chmod +x ~/scriptBUPosd2.sh\r\n\r\nsudo chmod -R +rx ~/backup\r\n\r\n\r\n\r\n",
            "min_cpu_platform": "",
            "name": "backup",
            "network_interface": [
              {
                "access_config": [
                  {
                    "nat_ip": "34.175.64.61",
                    "network_tier": "PREMIUM",
                    "public_ptr_domain_name": ""
                  }
                ],
                "alias_ip_range": [],
                "internal_ipv6_prefix_length": 0,
                "ipv6_access_config": [],
                "ipv6_access_type": "",
                "ipv6_address": "",
                "name": "nic0",
                "network": "https://www.googleapis.com/compute/v1/projects/projectadms/global/networks/default",
                "network_ip": "10.204.0.14",
                "nic_type": "",
                "queue_count": 0,
                "stack_type": "IPV4_ONLY",
                "subnetwork": "https://www.googleapis.com/compute/v1/projects/projectadms/regions/europe-southwest1/subnetworks/default",
                "subnetwork_project": "projectadms"
              }
            ],
            "network_performance_config": [],
            "params": [],
            "project": "projectadms",
            "reservation_affinity": [],
            "resource_policies": null,
            "scheduling": [
              {
                "automatic_restart": true,
                "instance_termination_action": "",
                "local_ssd_recovery_timeout": [],
                "min_node_cpus": 0,
                "node_affinities": [],
                "on_host_maintenance": "MIGRATE",
                "preemptible": false,
                "provisioning_model": "STANDARD"
              }
            ],
            "scratch_disk": [],
            "self_link": "https://www.googleapis.com/compute/v1/projects/projectadms/zones/europe-southwest1-c/instances/backup",
            "service_account": [],
            "shielded_instance_config": [
              {
                "enable_integrity_monitoring": true,
                "enable_secure_boot": false,
                "enable_vtpm": true
              }
            ],
            "tags": null,
            "tags_fingerprint": "42WmSpB8rSM=",
            "timeouts": null,
            "zone": "europe-southwest1-c"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiNiJ9"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_compute_instance",
      "name": "mjr",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 6,
          "attributes": {
            "advanced_machine_features": [],
            "allow_stopping_for_update": null,
            "attached_disk": [],
            "boot_disk": [
              {
                "auto_delete": true,
                "device_name": "persistent-disk-0",
                "disk_encryption_key_raw": "",
                "disk_encryption_key_sha256": "",
                "initialize_params": [
                  {
                    "image": "https://www.googleapis.com/compute/v1/projects/debian-cloud/global/images/debian-11-bullseye-v20231115",
                    "labels": {},
                    "resource_manager_tags": null,
                    "size": 10,
                    "type": "pd-standard"
                  }
                ],
                "kms_key_self_link": "",
                "mode": "READ_WRITE",
                "source": "https://www.googleapis.com/compute/v1/projects/projectadms/zones/europe-southwest1-c/disks/mjr"
              }
            ],
            "can_ip_forward": false,
            "confidential_instance_config": [],
            "cpu_platform": "Intel Broadwell",
            "current_status": "RUNNING",
            "deletion_protection": false,
            "description": "",
            "desired_status": null,
            "enable_display": false,
            "guest_accelerator": [],
            "hostname": "",
            "id": "projects/projectadms/zones/europe-southwest1-c/instances/mjr",
            "instance_id": "634562613473722649",
            "label_fingerprint": "42WmSpB8rSM=",
            "labels": null,
            "machine_type": "e2-micro",
            "metadata": null,
            "metadata_fingerprint": "mDlIH4nvOOM=",
            "metadata_startup_script": "#!/bin/bash\r\nsudo apt-get install -y ceph\r\nsudo apt-get install rsync\r\n\r\nssh-keygen -C publicMethod4 -f ~/.ssh/publicMethod4 -N \"\" -q\r\n\r\n\r\noutfile=~/debug.txt\r\n\r\nsudo mkdir /var/lib/ceph/mgr/ceph-mon\r\n\r\necho \"after1\" | tee -a $outfile\r\n# create auth key\r\nsudo ceph auth get-or-create mgr.mon mon 'allow profile mgr' osd 'allow *' mds 'allow *'\r\n\r\nsudo ceph auth get-or-create mgr.mon | sudo tee /etc/ceph/ceph.mgr.admin.keyring\r\n\r\ncat \u003c\u003cEOF \u003e ~/script.s\r\n#!/bin/bash\r\nsudo chown ceph. /etc/ceph/ceph.*\r\nsudo cp /etc/ceph/ceph.mgr.admin.keyring /var/lib/ceph/mgr/ceph-mon/keyring\r\nsudo chown ceph. /etc/ceph/ceph.mgr.admin.keyring\r\nsudo chown -R ceph. /var/lib/ceph/mgr/ceph-mon\r\nsudo systemctl enable --now ceph-mgr@mon\r\nEOF\r\n\r\nsudo chmod +x /mjmarquespais/script.sh\r\n\r\ncat \u003c\u003cEOF \u003e mjmarquespais/scriptBUPmgr.sh\r\n#!/bin/bash\r\n\r\nsudo rsync -av --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod4\" publicMethod4@10.204.0.14:~/backup/MGR/cephconf/ /etc/ceph\r\n\r\nsudo rsync -av --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod4\" publicMethod4@10.204.0.14:~/backup/MGR/cephvar/ /var/lib/ceph\r\nEOF\r\n\r\nsudo chmod +x ~/scriptBUPmgr.sh\r\n\r\necho \"after2\" | tee -a $outfile\r\n\r\n# mudar permissões para o backup\r\nsudo chmod -R +rx /etc/ceph/\r\nsudo chmod -R +rx /var/lib/ceph/\r\n",
            "min_cpu_platform": "",
            "name": "mjr",
            "network_interface": [
              {
                "access_config": [
                  {
                    "nat_ip": "34.175.74.91",
                    "network_tier": "PREMIUM",
                    "public_ptr_domain_name": ""
                  }
                ],
                "alias_ip_range": [],
                "internal_ipv6_prefix_length": 0,
                "ipv6_access_config": [],
                "ipv6_access_type": "",
                "ipv6_address": "",
                "name": "nic0",
                "network": "https://www.googleapis.com/compute/v1/projects/projectadms/global/networks/default",
                "network_ip": "10.204.0.13",
                "nic_type": "",
                "queue_count": 0,
                "stack_type": "IPV4_ONLY",
                "subnetwork": "https://www.googleapis.com/compute/v1/projects/projectadms/regions/europe-southwest1/subnetworks/default",
                "subnetwork_project": "projectadms"
              }
            ],
            "network_performance_config": [],
            "params": [],
            "project": "projectadms",
            "reservation_affinity": [],
            "resource_policies": null,
            "scheduling": [
              {
                "automatic_restart": true,
                "instance_termination_action": "",
                "local_ssd_recovery_timeout": [],
                "min_node_cpus": 0,
                "node_affinities": [],
                "on_host_maintenance": "MIGRATE",
                "preemptible": false,
                "provisioning_model": "STANDARD"
              }
            ],
            "scratch_disk": [],
            "self_link": "https://www.googleapis.com/compute/v1/projects/projectadms/zones/europe-southwest1-c/instances/mjr",
            "service_account": [],
            "shielded_instance_config": [
              {
                "enable_integrity_monitoring": true,
                "enable_secure_boot": false,
                "enable_vtpm": true
              }
            ],
            "tags": null,
            "tags_fingerprint": "42WmSpB8rSM=",
            "timeouts": null,
            "zone": "europe-southwest1-c"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiNiJ9"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_compute_instance",
      "name": "mon",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 6,
          "attributes": {
            "advanced_machine_features": [],
            "allow_stopping_for_update": null,
            "attached_disk": [
              {
                "device_name": "dbsss",
                "disk_encryption_key_raw": "",
                "disk_encryption_key_sha256": "",
                "kms_key_self_link": "",
                "mode": "READ_WRITE",
                "source": "https://www.googleapis.com/compute/v1/projects/projectadms/zones/europe-southwest1-c/disks/dbsss"
              }
            ],
            "boot_disk": [
              {
                "auto_delete": true,
                "device_name": "persistent-disk-0",
                "disk_encryption_key_raw": "",
                "disk_encryption_key_sha256": "",
                "initialize_params": [
                  {
                    "image": "https://www.googleapis.com/compute/v1/projects/debian-cloud/global/images/debian-11-bullseye-v20231115",
                    "labels": {},
                    "resource_manager_tags": null,
                    "size": 10,
                    "type": "pd-standard"
                  }
                ],
                "kms_key_self_link": "",
                "mode": "READ_WRITE",
                "source": "https://www.googleapis.com/compute/v1/projects/projectadms/zones/europe-southwest1-c/disks/mon"
              }
            ],
            "can_ip_forward": false,
            "confidential_instance_config": [],
            "cpu_platform": "Intel Broadwell",
            "current_status": "RUNNING",
            "deletion_protection": false,
            "description": "",
            "desired_status": null,
            "enable_display": false,
            "guest_accelerator": [],
            "hostname": "",
            "id": "projects/projectadms/zones/europe-southwest1-c/instances/mon",
            "instance_id": "6387234014370709229",
            "label_fingerprint": "42WmSpB8rSM=",
            "labels": null,
            "machine_type": "e2-micro",
            "metadata": null,
            "metadata_fingerprint": "o0odRshgrb4=",
            "metadata_startup_script": "#!/bin/bash\r\nsudo apt-get install -y ceph\r\nsudo apt-get install rsync\r\n\r\n# https://www.youtube.com/watch?v=HDEUdfS-S40\r\n# https://docs.ceph.com/en/latest/install/manual-deployment/\r\n# https://www.server-world.info/en/note?os=Debian_11\u0026p=ceph14\u0026f=1\r\n\r\noutfile=~/debug.txt\r\n\r\necho \"feito\" | tee -a $outfile\r\n\r\nssh-keygen -C publicMethod -f ~/.ssh/publicMethod -N \"\" -q\r\n\r\nuui=$(uuidgen)\r\nHOSTNAME=$(hostname)\r\n\r\n# Create or update ceph.conf\r\ncat \u003c\u003cEOF \u003e /etc/ceph/ceph.conf\r\n[global]\r\n# specify cluster network for monitoring\r\ncluster network = 10.204.0.0/24\r\n\r\n# specify public network\r\npublic network = 10.204.0.0/24\r\n\r\n# specify UUID generated above\r\nfsid = $uui\r\n\r\n# specify IP address of Monitor DaemonS\r\nmon host = 10.204.0.12\r\n\r\n# specify Hostname of Monitor Daemon\r\nmon initial members = $HOSTNAME\r\nosd pool default crush rule = -1\r\n\r\nauth_cluster required = cephx\r\nauth_service required = cephx\r\nauth_client required = cephx\r\n\r\n# mon.(Node name)\r\n[mon.mon]\r\n\r\n# specify Hostname of Monitor Daemon\r\nhost = mon\r\n\r\n# specify IP address of Monitor Daemon\r\nmon addr = 10.204.0.12\r\n\r\n# allow to delete pools\r\nmon allow pool delete = true\r\nEOF\r\n\r\n# Generate secret key for Cluster monitoring\r\nsudo ceph-authtool --create-keyring /etc/ceph/ceph.mon.keyring --gen-key -n mon. --cap mon 'allow *'S\r\n\r\n# generate secret key for Cluster admin\r\nsudo ceph-authtool --create-keyring /etc/ceph/ceph.client.admin.keyring --gen-key -n client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *'\r\n\r\n# generate key for bootstrap\r\nsudo ceph-authtool --create-keyring /var/lib/ceph/bootstrap-osd/ceph.keyring --gen-key -n client.bootstrap-osd --cap mon 'profile bootstrap-osd' --cap mgr 'allow r'\r\n\r\n# import generated key\r\nsudo ceph-authtool /etc/ceph/ceph.mon.keyring --import-keyring /etc/ceph/ceph.client.admin.keyring\r\nsudo ceph-authtool /etc/ceph/ceph.mon.keyring --import-keyring /var/lib/ceph/bootstrap-osd/ceph.keyring\r\n\r\n# generate monitor map\r\nFSID=$(grep \"^fsid\" /etc/ceph/ceph.conf | awk {'print $NF'})\r\nNODENAME=$(grep \"^mon initial\" /etc/ceph/ceph.conf | awk {'print $NF'})\r\nNODEIP=$(grep \"^mon host\" /etc/ceph/ceph.conf | awk {'print $NF'})\r\nmonmaptool --create --add $NODENAME $NODEIP --fsid $FSID /etc/ceph/monmap\r\n\r\n\u003c\u003c\u003c\u003c\u003c\u003c\u003c HEAD\r\noutfile=~/debug.txt\r\n=======\r\n\r\n\u003e\u003e\u003e\u003e\u003e\u003e\u003e a66f64aec70c93d5278f6192be176dc14876fd39\r\n\r\necho $HOSTNAME | tee -a $outfile  # mon\r\necho $uui | tee -a $outfile\r\necho $FSID | tee -a $outfile\r\necho $NODENAME | tee -a $outfile  # mon\r\necho $NODEIP | tee -a $outfile\r\n\r\n# create a directory for Monitor Daemon\r\n# directory name ⇒ (Cluster Name)-(Node Name)\r\nsudo mkdir /var/lib/ceph/mon/ceph-mon\r\n\r\n# assosiate key and monmap to Monitor Daemon\r\n# --cluster (Cluster Name)\r\nsudo ceph-mon --cluster ceph --mkfs -i $NODENAME --monmap /etc/ceph/monmap --keyring /etc/ceph/ceph.mon.keyring\r\nsudo chown ceph. /etc/ceph/ceph.*\r\nsudo chown -R ceph. /var/lib/ceph/mon/ceph-mon /var/lib/ceph/bootstrap-osd\r\nsudo systemctl enable --now ceph-mon@$NODENAME\r\n\r\n\r\n# enable Messenger v2 Protocol\r\necho \"before\" | tee -a $outfile\r\nsudo ceph mon enable-msgr2 | tee -a $outfile\r\necho \"after\" | tee -a $outfile\r\nsudo ceph config set mon auth_allow_insecure_global_id_reclaim false\r\n\r\nsudo firewall-cmd --zone=public --add-service=ceph-mon\r\nsudo firewall-cmd --zone=public --add-service=ceph-mon --permanent\r\nsudo firewall-cmd --reload\r\n\r\n\r\n# create a directory for Manager Daemon\r\n# directory name ⇒ (Cluster Name)-(Node Name)\r\nsudo mkdir /var/lib/ceph/mgr/ceph-mon\r\n\r\nsudo ceph auth get-or-create mgr.$NODENAME mon 'allow profile mgr' osd 'allow *' mds 'allow *'\r\n\r\nsudo ceph auth get-or-create mgr.mon | sudo tee /etc/ceph/ceph.mgr.admin.keyring\r\n\r\nsudo cp /etc/ceph/ceph.mgr.admin.keyring /var/lib/ceph/mgr/ceph-mon/keyring\r\nsudo chown ceph. /etc/ceph/ceph.mgr.admin.keyring\r\nsudo chown -R ceph. /var/lib/ceph/mgr/ceph-mon\r\nsudo systemctl enable --now ceph-mgr@$NODENAME\r\n\r\n\r\ncat \u003c\u003cEOF \u003e ~/scriptosd1.sh\r\n#!/bin/bash\r\nsudo scp -i ~/.ssh/publicMethod /etc/ceph/ceph.conf publicMethod@10.204.0.10:/tmp/\r\nsudo ssh -i ~/.ssh/publicMethod publicMethod@10.204.0.10 \"sudo mv /tmp/ceph.conf /etc/ceph/ceph.conf\"\r\n\r\nsudo scp -i ~/.ssh/publicMethod /etc/ceph/ceph.client.admin.keyring publicMethod@10.204.0.10:/tmp/\r\nsudo ssh -i ~/.ssh/publicMethod publicMethod@10.204.0.10 \"sudo mv /tmp/ceph.client.admin.keyring  /etc/ceph/ceph.client.admin.keyring\"\r\n\r\nsudo scp -i ~/.ssh/publicMethod /var/lib/ceph/bootstrap-osd/ceph.keyring publicMethod@10.204.0.10:/tmp/\r\nsudo ssh -i ~/.ssh/publicMethod publicMethod@10.204.0.10 \"sudo mv /tmp/ceph.keyring /var/lib/ceph/bootstrap-osd/ceph.keyring\"\r\nEOF\r\n\r\ncat \u003c\u003cEOF \u003e ~/scriptosd2.sh\r\n#!/bin/bash\r\nsudo scp -i ~/.ssh/publicMethod /etc/ceph/ceph.conf publicMethod@10.204.0.11:/tmp/\r\nsudo ssh -i ~/.ssh/publicMethod publicMethod@10.204.0.11 \"sudo mv /tmp/ceph.conf /etc/ceph/ceph.conf\"\r\n\r\nsudo scp -i ~/.ssh/publicMethod /etc/ceph/ceph.client.admin.keyring publicMethod@10.204.0.11:/tmp/\r\nsudo ssh -i ~/.ssh/publicMethod publicMethod@10.204.0.11 \"sudo mv /tmp/ceph.client.admin.keyring  /etc/ceph/ceph.client.admin.keyring\"\r\n\r\nsudo scp -i ~/.ssh/publicMethod /var/lib/ceph/bootstrap-osd/ceph.keyring publicMethod@10.204.0.11:/tmp/\r\nsudo ssh -i ~/.ssh/publicMethod publicMethod@10.204.0.11 \"sudo mv /tmp/ceph.keyring /var/lib/ceph/bootstrap-osd/ceph.keyring\"\r\nEOF\r\n\r\n\r\n\r\ncat \u003c\u003cEOF \u003e ~/script.sh\r\n#!/bin/bash\r\nsudo chown ceph. /etc/ceph/ceph.* /var/lib/ceph/bootstrap-osd/ceph.keyring\r\nsudo parted --script /dev/sdb 'mklabel gpt'\r\nsudo parted --script /dev/sdb \"mkpart primary 0% 100%\"\r\nsudo ceph-volume lvm create --data /dev/sdb1\r\nEOF\r\n\r\n\r\ncat \u003c\u003cEOF \u003e ~/scriptrdb.sh\r\n#!/bin/bash\r\nsudo scp -i ~/.ssh/publicMethod /etc/ceph/ceph.conf publicMethod@10.204.0.14:/tmp/\r\nsudo ssh -i ~/.ssh/publicMethod publicMethod@10.204.0.14 \"sudo mv /tmp/ceph.conf /etc/ceph/ceph.conf\"\r\n\r\nsudo scp -i ~/.ssh/publicMethod /etc/ceph/ceph.client.admin.keyring publicMethod@10.204.0.14:/tmp/\r\nsudo ssh -i ~/.ssh/publicMethod publicMethod@10.204.0.14 \"sudo mv /tmp/ceph.client.admin.keyring  /etc/ceph/ceph.client.admin.keyring\"\r\nEOF\r\n\r\ncat \u003c\u003cEOF \u003e ~/scriptmgr.sh\r\n#!/bin/bash\r\nsudo scp -i ~/.ssh/publicMethod /etc/ceph/ceph.conf publicMethod@10.204.0.13:/tmp/\r\nsudo ssh -i ~/.ssh/publicMethod publicMethod@10.204.0.13 \"sudo mv /tmp/ceph.conf /etc/ceph/ceph.conf\"\r\n\r\nsudo scp -i ~/.ssh/publicMethod /etc/ceph/ceph.client.admin.keyring publicMethod@10.204.0.13:/tmp/\r\nsudo ssh -i ~/.ssh/publicMethod publicMethod@10.204.0.13 \"sudo mv /tmp/ceph.client.admin.keyring  /etc/ceph/ceph.client.admin.keyring\"\r\nEOF\r\n\r\ncat \u003c\u003cEOF \u003e ~/scriptBUPmon.sh\r\n#!/bin/bash\r\n# sudo rsync -av --delete --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod\" publicMethod@10.204.0.14:~/backup/MON/cephconf /etc/ceph \r\nsudo rsync -av --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod\" publicMethod@10.204.0.14:~/backup/MON/cephconf/ /etc/ceph \r\n\r\nsudo rsync -av --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod\" publicMethod@10.204.0.14:~/backup/MON/cephvar/ /var/lib/ceph \r\nEOF\r\n\r\nsudo chmod +x ~/scriptosd1.sh\r\nsudo chmod +x ~/scriptosd2.sh\r\nsudo chmod +x ~/script.sh\r\nsudo chmod +x ~/scriptrdb.sh\r\nsudo chmod +x ~/scriptmgr.sh\r\nsudo chmod +x ~/scriptBUPmon.sh\r\n\r\n# mudar permissões para o backup\r\nsudo chmod -R +rx /etc/ceph/\r\nsudo chmod -R +rx /var/lib/ceph/",
            "min_cpu_platform": "",
            "name": "mon",
            "network_interface": [
              {
                "access_config": [
                  {
                    "nat_ip": "34.175.13.57",
                    "network_tier": "PREMIUM",
                    "public_ptr_domain_name": ""
                  }
                ],
                "alias_ip_range": [],
                "internal_ipv6_prefix_length": 0,
                "ipv6_access_config": [],
                "ipv6_access_type": "",
                "ipv6_address": "",
                "name": "nic0",
                "network": "https://www.googleapis.com/compute/v1/projects/projectadms/global/networks/default",
                "network_ip": "10.204.0.12",
                "nic_type": "",
                "queue_count": 0,
                "stack_type": "IPV4_ONLY",
                "subnetwork": "https://www.googleapis.com/compute/v1/projects/projectadms/regions/europe-southwest1/subnetworks/default",
                "subnetwork_project": "projectadms"
              }
            ],
            "network_performance_config": [],
            "params": [],
            "project": "projectadms",
            "reservation_affinity": [],
            "resource_policies": null,
            "scheduling": [
              {
                "automatic_restart": true,
                "instance_termination_action": "",
                "local_ssd_recovery_timeout": [],
                "min_node_cpus": 0,
                "node_affinities": [],
                "on_host_maintenance": "MIGRATE",
                "preemptible": false,
                "provisioning_model": "STANDARD"
              }
            ],
            "scratch_disk": [],
            "self_link": "https://www.googleapis.com/compute/v1/projects/projectadms/zones/europe-southwest1-c/instances/mon",
            "service_account": [],
            "shielded_instance_config": [
              {
                "enable_integrity_monitoring": true,
                "enable_secure_boot": false,
                "enable_vtpm": true
              }
            ],
            "tags": null,
            "tags_fingerprint": "42WmSpB8rSM=",
            "timeouts": null,
            "zone": "europe-southwest1-c"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiNiJ9",
          "dependencies": [
            "google_compute_disk.default2"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_compute_instance",
      "name": "osd1",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 6,
          "attributes": {
            "advanced_machine_features": [],
            "allow_stopping_for_update": null,
            "attached_disk": [
              {
                "device_name": "dbs",
                "disk_encryption_key_raw": "",
                "disk_encryption_key_sha256": "",
                "kms_key_self_link": "",
                "mode": "READ_WRITE",
                "source": "https://www.googleapis.com/compute/v1/projects/projectadms/zones/europe-southwest1-c/disks/dbs"
              }
            ],
            "boot_disk": [
              {
                "auto_delete": true,
                "device_name": "persistent-disk-0",
                "disk_encryption_key_raw": "",
                "disk_encryption_key_sha256": "",
                "initialize_params": [
                  {
                    "image": "https://www.googleapis.com/compute/v1/projects/debian-cloud/global/images/debian-11-bullseye-v20231115",
                    "labels": {},
                    "resource_manager_tags": null,
                    "size": 10,
                    "type": "pd-standard"
                  }
                ],
                "kms_key_self_link": "",
                "mode": "READ_WRITE",
                "source": "https://www.googleapis.com/compute/v1/projects/projectadms/zones/europe-southwest1-c/disks/osd1"
              }
            ],
            "can_ip_forward": false,
            "confidential_instance_config": [],
            "cpu_platform": "Intel Broadwell",
            "current_status": "RUNNING",
            "deletion_protection": false,
            "description": "",
            "desired_status": null,
            "enable_display": false,
            "guest_accelerator": [],
            "hostname": "",
            "id": "projects/projectadms/zones/europe-southwest1-c/instances/osd1",
            "instance_id": "3094480006699269870",
            "label_fingerprint": "42WmSpB8rSM=",
            "labels": null,
            "machine_type": "e2-micro",
            "metadata": null,
            "metadata_fingerprint": "G7YQMv09iAs=",
            "metadata_startup_script": "#!/bin/bash\r\nsudo apt-get install -y ceph\r\nsudo apt-get install rsync\r\n\r\nssh-keygen -C publicMethod2 -f ~/.ssh/publicMethod2 -N \"\" -q\r\n\r\n# https://docs.ceph.com/en/latest/install/manual-deployment/\r\n# https://www.server-world.info/en/note?os=Debian_11\u0026p=ceph14\u0026f=2\r\n\r\n#copiar ficheiros\r\n#sudp scp -i ~/.ssh/publicMethod2 ~/exemplo.txt publicMethod2@10.204.0.12:~/exemplo.txt\r\n\r\noutfile=~/debug.txt\r\n\r\n# ver discos da maquina\r\n# lsblk \r\n\r\ncat \u003c\u003cEOF \u003e ~/script.sh\r\n#!/bin/bash\r\nsudo chown ceph. /etc/ceph/ceph.* /var/lib/ceph/bootstrap-osd/ceph.keyring\r\nsudo parted --script /dev/sdb 'mklabel gpt'\r\nsudo parted --script /dev/sdb \"mkpart primary 0% 100%\"\r\nsudo ceph-volume lvm create --data /dev/sdb1\r\nEOF\r\n\r\nsudo chmod +x ~/script.sh\r\n\r\ncat \u003c\u003cEOF \u003e ~/scriptBUPosd1.sh\r\n#!/bin/bash\r\n\r\nsudo rsync -av --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod2\" publicMethod2@10.204.0.14:~/backup/OSD1/cephconf/ /etc/ceph \r\n\r\nsudo rsync -av --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod2\" publicMethod2@10.204.0.14:~/backup/OSD1/cephvar/ /var/lib/ceph \r\nEOF\r\n\r\nsudo chmod +x ~/scriptBUPosd1.sh\r\n\r\n# mudar permissões para o backup\r\nsudo chmod -R +rx /etc/ceph/\r\nsudo chmod -R +rx /var/lib/ceph/",
            "min_cpu_platform": "",
            "name": "osd1",
            "network_interface": [
              {
                "access_config": [
                  {
                    "nat_ip": "34.175.181.212",
                    "network_tier": "PREMIUM",
                    "public_ptr_domain_name": ""
                  }
                ],
                "alias_ip_range": [],
                "internal_ipv6_prefix_length": 0,
                "ipv6_access_config": [],
                "ipv6_access_type": "",
                "ipv6_address": "",
                "name": "nic0",
                "network": "https://www.googleapis.com/compute/v1/projects/projectadms/global/networks/default",
                "network_ip": "10.204.0.10",
                "nic_type": "",
                "queue_count": 0,
                "stack_type": "IPV4_ONLY",
                "subnetwork": "https://www.googleapis.com/compute/v1/projects/projectadms/regions/europe-southwest1/subnetworks/default",
                "subnetwork_project": "projectadms"
              }
            ],
            "network_performance_config": [],
            "params": [],
            "project": "projectadms",
            "reservation_affinity": [],
            "resource_policies": null,
            "scheduling": [
              {
                "automatic_restart": true,
                "instance_termination_action": "",
                "local_ssd_recovery_timeout": [],
                "min_node_cpus": 0,
                "node_affinities": [],
                "on_host_maintenance": "MIGRATE",
                "preemptible": false,
                "provisioning_model": "STANDARD"
              }
            ],
            "scratch_disk": [],
            "self_link": "https://www.googleapis.com/compute/v1/projects/projectadms/zones/europe-southwest1-c/instances/osd1",
            "service_account": [],
            "shielded_instance_config": [
              {
                "enable_integrity_monitoring": true,
                "enable_secure_boot": false,
                "enable_vtpm": true
              }
            ],
            "tags": null,
            "tags_fingerprint": "42WmSpB8rSM=",
            "timeouts": null,
            "zone": "europe-southwest1-c"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiNiJ9",
          "dependencies": [
            "google_compute_disk.default"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_compute_instance",
      "name": "osd2",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 6,
          "attributes": {
            "advanced_machine_features": [],
            "allow_stopping_for_update": null,
            "attached_disk": [
              {
                "device_name": "dbss",
                "disk_encryption_key_raw": "",
                "disk_encryption_key_sha256": "",
                "kms_key_self_link": "",
                "mode": "READ_WRITE",
                "source": "https://www.googleapis.com/compute/v1/projects/projectadms/zones/europe-southwest1-c/disks/dbss"
              }
            ],
            "boot_disk": [
              {
                "auto_delete": true,
                "device_name": "persistent-disk-0",
                "disk_encryption_key_raw": "",
                "disk_encryption_key_sha256": "",
                "initialize_params": [
                  {
                    "image": "https://www.googleapis.com/compute/v1/projects/debian-cloud/global/images/debian-11-bullseye-v20231115",
                    "labels": {},
                    "resource_manager_tags": null,
                    "size": 10,
                    "type": "pd-standard"
                  }
                ],
                "kms_key_self_link": "",
                "mode": "READ_WRITE",
                "source": "https://www.googleapis.com/compute/v1/projects/projectadms/zones/europe-southwest1-c/disks/osd2"
              }
            ],
            "can_ip_forward": false,
            "confidential_instance_config": [],
            "cpu_platform": "Intel Broadwell",
            "current_status": "RUNNING",
            "deletion_protection": false,
            "description": "",
            "desired_status": null,
            "enable_display": false,
            "guest_accelerator": [],
            "hostname": "",
            "id": "projects/projectadms/zones/europe-southwest1-c/instances/osd2",
            "instance_id": "2028766146590392046",
            "label_fingerprint": "42WmSpB8rSM=",
            "labels": null,
            "machine_type": "e2-micro",
            "metadata": null,
            "metadata_fingerprint": "3mIydyTlCZo=",
            "metadata_startup_script": "#!/bin/bash\r\nsudo apt-get install -y ceph\r\nsudo apt-get install rsync\r\n\r\nssh-keygen -C publicMethod1 -f ~/.ssh/publicMethod1 -N \"\" -q\r\n\r\n# https://docs.ceph.com/en/latest/install/manual-deployment/\r\n# https://www.server-world.info/en/note?os=Debian_11\u0026p=ceph14\u0026f=2\r\n\r\n#copiar ficheiros\r\n#scp -i ~/.ssh/publicMethod1 ~/exemplo.txt publicMethod1@10.204.0.12:~/exemplo.txt\r\n\r\n# ver discos da maquina\r\n# lsblk \r\n\r\nsudo cat \u003c\u003cEOF \u003e ~/script.sh\r\n#!/bin/bash\r\nsudo chown ceph. /etc/ceph/ceph.* /var/lib/ceph/bootstrap-osd/ceph.keyring\r\nsudo parted --script /dev/sdb 'mklabel gpt'\r\nsudo parted --script /dev/sdb \"mkpart primary 0% 100%\"\r\nsudo ceph-volume lvm create --data /dev/sdb1\r\nEOF\r\n\r\nsudo chmod +x ~/script.sh\r\n\r\ncat \u003c\u003cEOF \u003e ~/scriptBUPosd2.sh\r\n#!/bin/bash\r\n\r\nsudo rsync -av --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod1\" publicMethod1@10.204.0.14:~/backup/OSD2/cephconf/ /etc/ceph \r\n\r\nsudo rsync -av --exclude='.ceph' -e \"ssh -i ~/.ssh/publicMethod1\" publicMethod1@10.204.0.14:~/backup/OSD2/cephvar/ /var/lib/ceph \r\nEOF\r\n\r\nsudo chmod +x ~/scriptBUPosd2.sh\r\n\r\n# mudar permissões para o backup\r\nsudo chmod -R +rx /etc/ceph/\r\nsudo chmod -R +rx /var/lib/ceph/",
            "min_cpu_platform": "",
            "name": "osd2",
            "network_interface": [
              {
                "access_config": [
                  {
                    "nat_ip": "34.175.233.246",
                    "network_tier": "PREMIUM",
                    "public_ptr_domain_name": ""
                  }
                ],
                "alias_ip_range": [],
                "internal_ipv6_prefix_length": 0,
                "ipv6_access_config": [],
                "ipv6_access_type": "",
                "ipv6_address": "",
                "name": "nic0",
                "network": "https://www.googleapis.com/compute/v1/projects/projectadms/global/networks/default",
                "network_ip": "10.204.0.11",
                "nic_type": "",
                "queue_count": 0,
                "stack_type": "IPV4_ONLY",
                "subnetwork": "https://www.googleapis.com/compute/v1/projects/projectadms/regions/europe-southwest1/subnetworks/default",
                "subnetwork_project": "projectadms"
              }
            ],
            "network_performance_config": [],
            "params": [],
            "project": "projectadms",
            "reservation_affinity": [],
            "resource_policies": null,
            "scheduling": [
              {
                "automatic_restart": true,
                "instance_termination_action": "",
                "local_ssd_recovery_timeout": [],
                "min_node_cpus": 0,
                "node_affinities": [],
                "on_host_maintenance": "MIGRATE",
                "preemptible": false,
                "provisioning_model": "STANDARD"
              }
            ],
            "scratch_disk": [],
            "self_link": "https://www.googleapis.com/compute/v1/projects/projectadms/zones/europe-southwest1-c/instances/osd2",
            "service_account": [],
            "shielded_instance_config": [
              {
                "enable_integrity_monitoring": true,
                "enable_secure_boot": false,
                "enable_vtpm": true
              }
            ],
            "tags": null,
            "tags_fingerprint": "42WmSpB8rSM=",
            "timeouts": null,
            "zone": "europe-southwest1-c"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiNiJ9",
          "dependencies": [
            "google_compute_disk.default1"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
